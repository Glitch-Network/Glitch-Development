<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
    />
    <title>Glitch</title>

    <meta name="googlebot" content="index, follow, snippet" />
    <link rel="shortcut icon" content="favicon.ico" />
    <link rel="stylesheet" href="index.css" />
    <link rel="icon" type="image/png" href="assets/favicon.png" />
    <script src="baremux/bare.cjs" defer></script>
    <script src="epoxy/index.js" defer></script>
    <script src="uv/uv.bundle.js" defer></script>
    <script src="uv/uv.config.js" defer></script>
    <script src="register-sw.js" defer></script>
    <script src="search.js" defer></script>
    <script src="index.js" defer></script>
    <link rel="stylesheet" href="gbl.css"/>
    <style>
      body {
        overflow: hidden

      }
    </style>
    
    <script src="options.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-278K4F012J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-278K4F012J');
</script>

</head>

  <body>
    <style>
      body {
          background-color: black;
      }
      /* HTML: <div class="loader"></div> */

  #loading-div {
    position: fixed;
    top: -1px;
    left: -1px;
  }

  </style>

  <div id="root" style="position: fixed; left: 5px; background-color: white; opacity: 0.5; top: 15px;">

  </div>
  <div id="loading-div">
      <iframe style="height: calc(100vh + 1px) ;width: calc(100vw + 1px );" src="loading.html"></iframe>

    </div>
    

    <form id="uv-form" class="flex-center">
      <input
        id="uv-search-engine"
        value="https://www.google.com/search?q=%s"
        type="hidden"
      />
      <input style="display: none;" id="uv-address" type="text" placeholder="Search the web freely" />
    </form>
    
    <iframe style="border: none; height: 100vh; width: 100vw" id="uv-frame"></iframe>
  </body>
    <script>
  // Function to parse URL parameters
  function getURLParameter(name) {
    name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
    var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
    var results = regex.exec(location.search);
    return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
  }

  // Automatically load the URL parameter into the input field
  document.addEventListener('DOMContentLoaded', function() {
   // check url parameter
   var url = getURLParameter('refresh');
   if (url) {
     // do nothing
   }
   else {
    // Wait, we dont need to do this. I already fixed it from the source 
    // window.location.href = window.location.href + '&refresh=1'; // Fix that damn url getting the ?refresh instead of the launch bug
   }
  });

 x = setInterval(function(){
    if (document.getElementById("uv-frame").contentDocument.body.innerHTML != "") {
      clearInterval(x);
      document.getElementById("loading-div").remove()
    }
  })

  </script>
</html>